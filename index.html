<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>年間休日数 競争力比較 - 熊本市</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 20px; }
        h1 { color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        /* フィルタUIはJSONが自動生成するので、HTML側の手動UIは隠します */
        .controls { display: none; }
        #vis { margin-top: 30px; }
    </style>
</head>
<body>

    <h1>熊本市 各事業所の年間休日数 競争力散布図</h1>

    <div id="vis"></div>

    <script>
        const JSON_SPEC_URL = "https://kuemura-cmd.github.io/kumamoto-job-analysis/annual_holidays_scatter_plot_deduplicated.json"; 
        
        async function initializeChart() {
            try {
                const response = await fetch(JSON_SPEC_URL);
                if (!response.ok) {
                    throw new Error('JSONファイルを読み込めませんでした: ' + response.statusText);
                }
                const originalSpec = await response.json();
                
                // グラフの描画
                vegaEmbed('#vis', originalSpec, { mode: "vega-lite", actions: false }).catch(console.error);

            } catch (error) {
                document.getElementById('vis').innerHTML = `<p style="color:red;">グラフの読み込みに失敗しました: ${error.message}</p>`;
                console.error(error);
            }
        }

        window.onload = initializeChart;
    </script>

</body>
</html>
