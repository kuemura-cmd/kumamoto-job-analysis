{
  "title": "熊本市 各事業所の年間休日数散布図",
  "data": {
    "name": "data_source"
    // ★★★ここにデータ全体が含まれます。データ量が多いため省略★★★
    // 実際にWebに公開する際は、このJSONを生成したときに出力されたデータが
    // "values"として自動的に組み込まれていることを確認してください。
    // もしJSONファイルにデータが含まれていない場合は、別途CSVとして公開した
    // 集計データをURLで指定する必要があります（次のセクションを参照）。
  },
  "params": [
    {
      "name": "district_filter",
      "bind": {
        "input": "select",
        "options": ["すべて", "中央区", "東区", "西区", "南区", "北区", "その他"],
        "name": "エリア: "
      },
      "value": "すべて"
    },
    {
      "name": "job_filter",
      "bind": {
        "input": "select",
        "options": ["すべて", "正看護師", "准看護師", "その他看護職"],
        "name": "職種: "
      },
      "value": "すべて"
    }
  ],
  "transform": [
    {
      "filter": "(datum.区 === district_filter) || (district_filter === 'すべて')"
    },
    {
      "filter": "(datum.分類 === job_filter) || (job_filter === 'すべて')"
    },
    {
      "window": [{"op": "rank", "as": "順位"}],
      "sort": [{"field": "年間休日数（中央値）", "order": "ascending"}]
    },
    {
      "aggregate": [{"op": "median", "field": "年間休日数（中央値）", "as": "中央値"}],
      "as": ["中央値_全体"]
    }
  ],
  "layer": [
    {
      "mark": {"type": "rule", "color": "red", "strokeDash": [5, 5]},
      "encoding": {
        "y": {"field": "中央値_全体", "type": "quantitative"},
        "tooltip": [
          {"field": "中央値_全体", "format": ".1f", "title": "中央値"}
        ]
      }
    },
    {
      "mark": {"type": "circle", "size": 60},
      "encoding": {
        "x": {"field": "順位", "title": "求人事業所 順位 (年間休日数中央値 昇順)"},
        "y": {"field": "年間休日数（中央値）", "title": "年間休日数（中央値） (日)"},
        "color": {"field": "分類", "title": "職種分類", "sort": ["正看護師", "准看護師", "その他看護職"]},
        "tooltip": [
          "事業所名",
          "区",
          "分類",
          "業種分類",
          {"field": "年間休日数（中央値）", "format": ".0f", "title": "休日数中央値"}
        ]
      }
    }
  ],
  "config": {
    "title": {"fontSize": 16},
    "legend": {"titleFontSize": 12, "labelFontSize": 11}
  }
}